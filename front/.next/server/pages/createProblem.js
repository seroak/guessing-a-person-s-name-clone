(()=>{var e={};e.id=137,e.ids=[137,660],e.modules={6205:e=>{e.exports={input:"createProblem_input__HqmpX",erase:"createProblem_erase__wuHPJ",button:"createProblem_button__30W4r",create:"createProblem_create__iqwlx"}},3352:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>b,default:()=>m,getServerSideProps:()=>g,getStaticPaths:()=>x,getStaticProps:()=>d,reportWebVitals:()=>h,routeModule:()=>j,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>N,unstable_getStaticPaths:()=>P,unstable_getStaticProps:()=>f});var s=r(7093),l=r(5244),i=r(1323),o=r(5388),n=r.n(o),u=r(2166),c=r(2102),p=e([u,c]);[u,c]=p.then?(await p)():p;let m=(0,i.l)(c,"default"),d=(0,i.l)(c,"getStaticProps"),x=(0,i.l)(c,"getStaticPaths"),g=(0,i.l)(c,"getServerSideProps"),b=(0,i.l)(c,"config"),h=(0,i.l)(c,"reportWebVitals"),f=(0,i.l)(c,"unstable_getStaticProps"),P=(0,i.l)(c,"unstable_getStaticPaths"),N=(0,i.l)(c,"unstable_getStaticParams"),v=(0,i.l)(c,"unstable_getServerProps"),S=(0,i.l)(c,"unstable_getServerSideProps"),j=new s.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/createProblem",pathname:"/createProblem",bundlePath:"",filename:""},components:{App:u.default,Document:n()},userland:c});a()}catch(e){a(e)}})},2102:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>v,getServerSideProps:()=>N});var s=r(997),l=r(6689),i=r(2082),o=r(6205),n=r.n(o),u=r(3291),c=r(6368),p=r(8579),m=r(4550),d=r.n(m),x=r(6517),g=r.n(x),b=r(1163),h=r(9866),f=r(9648),P=e([i,u,c,p,h,f]);[i,u,c,p,h,f]=P.then?(await P)():P;let N=h.Z.getServerSideProps(e=>async({req:t})=>{let r=t?t.headers.cookie:"";f.default.defaults.headers.Cookie="",t&&r&&(f.default.defaults.headers.Cookie=r),await e.dispatch((0,p.II)())}),v=()=>{let{problemList:e,imagePath:t}=(0,u.useSelector)(e=>e.problem),{me:r}=(0,u.useSelector)(e=>e.user),a=new(d())({length:10}),[o,p]=(0,l.useState)([]),[m,x]=(0,l.useState)([]),h=(0,l.useRef)([]),f=(0,b.useRouter)(),P=(0,u.useDispatch)();(0,l.useEffect)(()=>{r&&r.id||f.push("/")},[r&&r.id]);let N=async(e,t)=>{let r=new FormData,a=t.target.files[0];r.append("image",a),P((0,c.Ix)(r)),x(e)};(0,l.useEffect)(()=>{let e=g().cloneDeep(o);0!==e.length&&(e[m].Image=t,p(e))},[t]),(0,l.useEffect)(()=>{P((0,c.wU)())},[]),(0,l.useEffect)(()=>{p(e)},[e]),(0,l.useEffect)(()=>{0===o.length&&p([...o,{ProblemId:a.rnd(),Image:"",Name1:"",Name2:"",Name3:"",Name4:""}])},[o]);let v=(e,t,r)=>{let a=g().cloneDeep(o);a[e][t]=r,p(a)},S=e=>{let t=[...o];P((0,c.aG)({ProblemId:t[e].ProblemId})),t.splice(e,1),p(t)},j=e=>{e.preventDefault()},I=e=>{e.preventDefault()},y=(e,t)=>{t.preventDefault();let r=t.dataTransfer.files;r.length>0&&N(e,{target:{files:[r[0]]}})};return s.jsx(s.Fragment,{children:s.jsx(i.Z,{children:(0,s.jsxs)("form",{onSubmit:t=>{t.preventDefault();let r=!1;o.forEach(e=>{let t=e.Name1.trim();if(null==e.Image||""==t)return r||(alert("사진과 이름 후보 1을 작성해주세요"),r=!0),!1}),!0!==r&&(o.forEach((t,r)=>{let a=t.Name1.trim(),s=t.Name2.trim(),l=t.Name3.trim(),i=t.Name4.trim();e.find(e=>e.ProblemId===t.ProblemId)?P((0,c.uJ)({ProblemId:t.ProblemId,Image:t.Image,Name1:a,Name2:s,Name3:l,Name4:i})):P((0,c.nG)({ProblemId:t.ProblemId,Image:t.Image,Name1:a,Name2:s,Name3:l,Name4:i}))}),P((0,c.wU)()),f.push("/"))},encType:"multipart/form-data",children:[s.jsx("h1",{children:"이미지 및 텍스트 입력 폼"}),o.map((e,t)=>(0,s.jsxs)("div",{className:n().create,onDragEnter:j,onDragOver:I,onDrop:e=>y(t,e),children:[(0,s.jsxs)("label",{className:n().label,style:{display:"inline-block",padding:"10px 15px",backgroundColor:"#E8E7E7",color:"black",borderRadius:"5px",border:"none",cursor:"pointer",boxShadow:"0px 3px 6px rgba(0, 0, 0, 0.1)",transition:"background-color 0.3s"},children:[s.jsx("div",{children:"이미지 업로드"}),s.jsx("input",{name:"image",type:"file",onChange:e=>N(t,e),ref:e=>h.current[t]=e,style:{display:"none"}}),s.jsx("div",{style:{width:"100px",height:"100px"},children:e.Image&&s.jsx("img",{src:`http://localhost:3065/${e.Image}`,alt:`Preview ${t}`,style:{maxWidth:"100px",maxHeight:"100px"}})})]}),(0,s.jsxs)("label",{children:["이름 후보 1",s.jsx("input",{className:n().input,type:"text",value:e.Name1,onChange:e=>v(t,"Name1",e.target.value)})]}),(0,s.jsxs)("label",{children:["이름 후보 2",s.jsx("input",{className:n().input,type:"text",value:e.Name2,onChange:e=>v(t,"Name2",e.target.value)})]}),(0,s.jsxs)("label",{children:["이름 후보 3",s.jsx("input",{className:n().input,type:"text",value:e.Name3,onChange:e=>v(t,"Name3",e.target.value)})]}),(0,s.jsxs)("label",{children:["이름 후보 4",s.jsx("input",{className:n().input,type:"text",value:e.Name4,onChange:e=>v(t,"Name4",e.target.value)})]}),s.jsx("div",{children:s.jsx("button",{onClick:()=>S(t),className:n().erase,type:"button",children:"지우기"})})]},t)),s.jsx("button",{className:n().button,onClick:()=>{p([...o,{ProblemId:a.rnd(),Image:"",Name1:"",Name2:"",Name3:"",Name4:""}])},type:"button",children:"만들기"}),s.jsx("button",{className:n().button,type:"submit",children:"Submit"})]})})})};a()}catch(e){a(e)}})},6517:e=>{"use strict";e.exports=require("lodash")},5648:e=>{"use strict";e.exports=require("next-redux-wrapper")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},580:e=>{"use strict";e.exports=require("prop-types")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},4550:e=>{"use strict";e.exports=require("short-unique-id")},3258:e=>{"use strict";e.exports=import("@reduxjs/toolkit")},9648:e=>{"use strict";e.exports=import("axios")},3291:e=>{"use strict";e.exports=import("react-redux")},9871:e=>{"use strict";e.exports=import("redux")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[388,910,841],()=>r(3352));module.exports=a})();